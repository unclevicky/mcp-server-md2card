/**
 * 生成读书笔记的服务
 * 这是一个模拟实现，实际项目中可以连接到数据库或API获取真实数据
 */

// 模拟书籍数据库
const booksDatabase = {
  '深度工作': {
    title: '深度工作: 如何有效使用每一点脑力',
    author: 'Cal Newport',
    notes: `# 深度工作: 如何有效使用每一点脑力

## 核心概念

**深度工作**是指在无干扰的状态下专注进行职业活动，使认知能力达到极限。这种努力能创造新价值，提升技能，难以复制。

**浅薄工作**是指不需要太多认知要求的事务性工作，通常在充满干扰的环境中进行，创造的价值较少，容易复制。

## 关键洞见

1. **深度工作在当今世界变得越来越珍贵且稀缺**
   - 网络工具和即时通讯正在减少我们进行深度工作的能力
   - 开放式办公环境和持续协作的文化阻碍了深度工作
   - 测量工作产出的难度导致我们倾向于关注可见的"忙碌"而非真正的生产力

2. **深度工作是一种需要培养的技能**
   - 需要通过刻意练习来发展
   - 需要建立支持深度工作的习惯和仪式
   - 需要消除分心源并创造专注环境

3. **四种深度工作策略**
   - 修道院式：最大程度地减少或消除浅薄工作
   - 双模式：在特定时期专注于深度工作，其他时间则处理常规事务
   - 节奏式：在日常工作中建立深度工作的固定习惯
   - 新闻记者式：在任何可能的时间立即转入深度工作状态

## 实践建议

- **建立深度工作的仪式**
  - 选择固定的工作地点
  - 设定明确的工作时间和目标
  - 创建支持规则（如禁用网络、手机静音等）
  - 准备必要的支持（咖啡、小吃、材料等）

- **拥抱无聊**
  - 训练大脑适应不被刺激的状态
  - 在日常生活中减少对手机和社交媒体的依赖
  - 定期进行"数字排毒"

- **戒除社交媒体**
  - 评估每个工具的真正价值与成本
  - 采用"关键少数"原则，只使用真正重要的工具
  - 安排特定时间使用社交媒体，而非随时查看

- **排空大脑**
  - 工作结束时进行完整的关机仪式
  - 记录未完成的任务和想法
  - 为第二天制定计划
  - 相信系统，让大脑真正休息

## 结论

在注意力经济时代，深度工作是一项稀缺而宝贵的能力。通过有意识地培养这种能力，我们不仅能提高工作质量和产出，还能体验到更加充实和有意义的职业生活。`
  },
  '原子习惯': {
    title: '原子习惯：细微改变带来巨大成就',
    author: 'James Clear',
    notes: `# 原子习惯：细微改变带来巨大成就

## 核心理念

**原子习惯**是指那些微小的、容易执行的习惯，它们是更大系统的基本单位。当这些小习惯积累起来时，会产生显著的复合效应。

## 习惯形成的四个法则

### 1. 让它显而易见（提示）

- **环境设计**：调整环境使好习惯的提示更明显
- **习惯叠加**：将新习惯与已有习惯绑定
- **实施意图**：具体计划何时何地执行习惯（"我将在[时间]在[地点]做[行动]"）
- **提示捆绑**：将想要培养的习惯与已有的提示关联起来

### 2. 让它有吸引力（渴望）

- **诱惑捆绑**：将你需要做的事与你想做的事结合
- **加入积极文化**：与已经拥有你想要习惯的人在一起
- **创造动机仪式**：在执行习惯前做一些令人愉悦的事
- **重新定义习惯**：专注于习惯带来的好处而非困难

### 3. 让它简单易行（回应）

- **减少阻力**：简化环境，减少执行习惯所需的步骤
- **准备环境**：提前做好准备工作，降低开始门槛
- **两分钟规则**：将新习惯简化到只需两分钟完成
- **一次性决策**：做出有利于未来好习惯的一次性决策

### 4. 让它令人满足（奖励）

- **即时满足**：为好习惯增加即时正面反馈
- **习惯追踪**：使用习惯追踪器可视化进度
- **不要破坏连续记录**：保持习惯链不中断
- **问责伙伴**：找人监督你的习惯执行情况

## 进阶策略

### 身份转变

- 关注你想成为什么样的人，而非你想达成什么
- 通过小习惯建立新身份的证据
- 习惯是成为某种类型的人的途径

### 习惯塑造与基因

- 选择适合你天赋和倾向的习惯
- 在你有优势的领域培养习惯
- 选择能带来成功和满足感的游戏

### 黄金法则

- 保持习惯足够有挑战性以促进进步
- 但又不至于让你感到无法完成
- 将大部分时间花在"学习区"而非"舒适区"

## 应对习惯失败

- 永远不要错过两次：避免连续失败
- 关注系统而非目标：建立更好的系统
- 将习惯与身份联系起来：做出符合你想成为的人的决定

## 结论

习惯的力量不在于一次性的改变，而在于日积月累的复合效应。通过理解习惯背后的科学，设计更好的系统，我们可以构建更好的习惯，最终实现持久的积极改变。`
  },
  '思考，快与慢': {
    title: '思考，快与慢',
    author: 'Daniel Kahneman',
    notes: `# 思考，快与慢

## 两个思考系统

**系统1**：快速、自动、情感化、刻板印象化、无意识
- 特点：不费力、并行处理、直觉性、联想性
- 例子：识别熟悉的面孔、驾驶熟悉的路线、理解简单句子

**系统2**：缓慢、需要努力、逻辑性、计算性、有意识
- 特点：费力、串行处理、理性、需要专注
- 例子：复杂计算、寻找特定人物、填写税表

## 关键认知偏见与启发式

### 锚定效应
- 人们倾向于过度依赖首先获得的信息（锚点）
- 应用：价格谈判、销售策略、薪资协商

### 可得性启发式
- 根据信息的易得性或生动程度评估概率
- 导致：对媒体报道事件的风险过度估计

### 代表性启发式
- 根据事物与原型的相似程度做判断
- 导致：忽视基础概率，产生刻板印象

### 确认偏见
- 倾向于寻找支持已有信念的信息
- 忽视或低估反面证据

### 损失厌恶
- 损失带来的痛苦大于等量获得带来的快乐
- 应用：营销策略、投资决策、风险规避

### 框架效应
- 同一信息的不同呈现方式导致不同决策
- 例子：存活率vs死亡率的表述影响治疗选择

## 幸福与记忆

### 体验自我vs记忆自我
- 体验自我：当下的体验和感受
- 记忆自我：对过去经历的记忆和评价

### 峰终法则
- 对经历的评价主要基于高峰时刻和结束时的感受
- 经历的持续时间被大大低估（持续忽视）

### 聚焦错觉
- 过度关注某一因素对幸福的影响
- 忽视适应和其他重要因素

## 决策与理性

### 前景理论
- 决策基于潜在收益和损失，而非最终状态
- 在面对收益时风险规避，面对损失时风险寻求

### 禀赋效应
- 拥有某物后，对其赋予更高价值
- 导致卖家期望价格高于买家愿付价格

### 心理账户
- 将金钱分类到不同心理账户
- 导致非理性的金钱决策

## 实践应用

1. **意识到偏见**：认识到自己的思维偏见是第一步
2. **放慢决策**：重要决策时激活系统2思考
3. **寻求外部视角**：咨询他人可避免个人盲点
4. **使用决策清单**：减少启发式思维的负面影响
5. **考虑相反观点**：主动寻找反对自己观点的证据

## 结论

了解我们思维的局限性和偏见，可以帮助我们做出更明智的决策。虽然系统1思维高效且必要，但关键决策时需要系统2的介入和监督。通过理解这两个系统如何相互作用，我们可以更好地驾驭自己的思维过程。`
  },
  '刻意练习': {
    title: '刻意练习：如何从新手到大师',
    author: 'Anders Ericsson',
    notes: `# 刻意练习：如何从新手到大师

## 核心概念

**刻意练习**是一种特殊的练习方法，旨在有效提高特定领域的表现。它不同于普通的重复练习，而是有目的、系统化的努力，专注于改进弱点。

## 刻意练习的关键原则

### 1. 走出舒适区
- 持续挑战自己，超越当前能力水平
- 练习应该是困难的，但不至于完全无法完成
- 不断调整难度，保持在"学习区"

### 2. 明确具体的目标
- 设定具体、可衡量的小目标
- 关注特定技能或技术的提升
- 将大目标分解为可管理的子目标

### 3. 专注和投入
- 完全集中注意力于练习
- 避免分心和机械性重复
- 持续时间通常不超过90分钟，需要充分休息

### 4. 即时反馈
- 获取关于表现的及时、准确信息
- 可来自教练、录像回放或自我评估
- 根据反馈立即调整练习方法

### 5. 有效的心理表征
- 建立领域知识的内部模型
- 理解关键模式和结构
- 能够预测结果和识别问题

### 6. 专业指导
- 寻找该领域的专家指导
- 获取个性化的练习计划和反馈
- 避免养成不良习惯

## 常见误区

### 天赋神话
- 卓越成就主要来自后天努力，而非先天才能
- 所谓"天才"通常有大量练习历史
- 遗传因素可能影响起点，但不决定终点

### 10,000小时规则的误解
- 不仅仅是时间累积，而是如何使用这些时间
- 质量远比数量重要
- 没有固定的时间门槛保证专业水平

### 意志力的局限
- 仅靠意志力难以维持长期练习
- 需要建立支持性环境和习惯
- 动机和目标设定至关重要

## 实践应用

### 建立练习计划
1. 分析目标领域的关键技能
2. 评估当前水平和差距
3. 设计针对性练习活动
4. 安排定期反馈和评估
5. 不断调整计划

### 突破平台期
- 寻找具体的改进领域
- 改变练习方式和内容
- 获取新的反馈来源
- 重新评估心理表征

### 保持动机
- 将长期目标与日常练习联系起来
- 庆祝小成就和进步
- 找到内在意义和目的
- 建立支持性社交环境

## 不同领域的应用

### 音乐
- 分解复杂段落，慢速练习
- 录音并分析自己的表演
- 专注于技术弱点

### 运动
- 分解动作，专注于特定技术环节
- 使用视频分析和数据反馈
- 模拟比赛情境

### 认知技能
- 解决边界情况和挑战性问题
- 寻求同行评审和批评
- 教授他人以检验理解

## 结论

刻意练习是达到卓越水平的最有效路径。它需要我们走出舒适区，设定明确目标，获取即时反馈，并在专业指导下系统性地练习。通过理解和应用这些原则，任何人都可以在自己选择的领域中显著提高表现水平。`
  }
};

/**
 * 生成读书笔记
 * @param {string} bookName - 书籍名称
 * @returns {Promise<{success: boolean, markdown?: string, error?: string}>} 结果对象
 */
export const generateNotes = async (bookName) => {
  try {
    // 模拟API调用延迟
    await new Promise(resolve => setTimeout(resolve, 300));
    
    // 检查书籍是否存在
    const book = booksDatabase[bookName];
    
    if (!book) {
      return {
        success: false,
        error: `未找到书籍 "${bookName}" 的笔记`
      };
    }
    
    // 返回书籍笔记
    return {
      success: true,
      markdown: book.notes
    };
  } catch (error) {
    console.error('生成笔记失败:', error);
    return {
      success: false,
      error: '生成笔记时发生错误'
    };
  }
}; 